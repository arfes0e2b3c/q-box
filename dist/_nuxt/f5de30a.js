(window.webpackJsonp=window.webpackJsonp||[]).push([[1,8],{263:function(e,t,n){var content=n(269);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(106).default)("7e26872d",content,!0,{sourceMap:!1})},266:function(e,t,n){"use strict";n.r(t);var o=n(301),r=n(8),c=(n(41),n(51),{props:{mode:"",contentId:"",replyTweetId:"",contentOriginId:"",replySentence:"",held:!1,show:"",MICROCMS_KEY:"",CONSUMER_KEY:"",CONSUMER_KEY_SECRET:"",ACCESS_TOKEN_KEY:"",ACCESS_TOKEN_KEY_SECRET:""},data:function(){return{getShow:this.show,getMode:this.mode,getContentId:this.contentId,getReplyTweetId:this.replyTweetId,getContentOriginId:this.contentOriginId,getReplySentence:this.replySentence,sentence:"",textareaWord:{question:"お手伝いサークルへの質問を入力する",answer:"この質問への回答を入力する",reply:"この質問への返信を入力する",replyForReply:"この返信への回答を入力する"},buttonWord:{question:"質問する",answer:"回答する",reply:"返信する",replyForReply:"回答する"}}},methods:{toggle:function(){this.getShow=!this.getShow},sendSentence:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.sentence||"question"!==e.getMode){t.next=5;break}return t.next=3,e.$axios.$post("https://q-box.microcms.io/api/v1/q_box_posts",{question:e.sentence,held:!1},{headers:{"Content-Type":"application/json","X-MICROCMS-API-KEY":e.MICROCMS_KEY}}).catch((function(e){alert("通信に失敗しました。："+e),console.log(e)})).then((function(){e.sentence="",alert("送信しました。")}));case 3:t.next=15;break;case 5:if(!e.sentence||"answer"!==e.getMode){t.next=9;break}e.postTweet(e.sentence,e.getContentId,"tweet","answer"),t.next=15;break;case 9:if(!e.sentence||"reply"!==e.getMode){t.next=14;break}return t.next=12,e.$axios.$post("https://q-box.microcms.io/api/v1/q_box_replies/",{replyFor:e.getContentId,replySentence:e.sentence,held:!1},{headers:{"Content-Type":"application/json","X-MICROCMS-API-KEY":e.MICROCMS_KEY}}).catch((function(e){alert("通信に失敗しました。："+e),console.log(e)})).then((function(){e.sentence=""}));case 12:t.next=15;break;case 14:e.sentence&&"replyForReply"===e.getMode&&(e.postTweet("【フォロワーの方からの情報】\n\n"+e.getReplySentence+"\n\n"+e.sentence,e.getReplyTweetId,"reply","replyForReply"),e.$emit("setReply"));case 15:case"end":return t.stop()}}),t)})))()},postTweet:function(e,t,c,d){var l=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var h,i,v,f,m,x,y,w,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(110,140,h=Object(o.a)(e),!Array.isArray(e))for((h=[]).push(e.slice(0,110)),i=110;i<e.length-2;i+=140)h.push(e.slice(i,i+140));v=n(281),f=n(282),m=v({consumer:{key:l.CONSUMER_KEY,secret:l.CONSUMER_KEY_SECRET},signature_method:"HMAC-SHA1",hash_function:function(e,t){return f.createHmac("sha1",t).update(e).digest("base64")}}),x={key:l.ACCESS_TOKEN_KEY,secret:l.ACCESS_TOKEN_KEY_SECRET},y={url:"https://api.twitter.com/2/tweets",method:"POST"},w=m.toHeader(m.authorize(y,x)).Authorization,data=[],"tweet"===c?data={text:h[0]+"\nhttps://immense-sea-94037.herokuapp.com/"+t}:"reply"===c?data={text:h[0],reply:{in_reply_to_tweet_id:t}}:console.log("not fit!"),l.$axios.$post("/api/tweets",data,{headers:{authorization:w}}).then((function(e){h.length>1&&l.postTweet(h.slice(1),e.data.id,"reply"),"answer"===d?l.sendSentenceModeAnswer(e.data.id):"replyForReply"===d&&(l.sendSentenceModeReplyForReply(e.data.id),l.setReplyTweetId(e.data.id))})).catch((function(e){alert("通信に失敗しました。："+e),console.log(e)}));case 13:case"end":return r.stop()}}),r)})))()},sendSentenceModeAnswer:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$axios.$patch("https://q-box.microcms.io/api/v1/q_box_posts/"+t.getContentId,{answer:t.sentence,replyTweetId:e},{headers:{"Content-Type":"application/json","X-MICROCMS-API-KEY":t.MICROCMS_KEY}}).catch((function(e){alert("通信に失敗しました。："+e),console.log(e)})).then((function(){t.$emit("get-posts"),t.sentence=""}));case 2:case"end":return n.stop()}}),n)})))()},sendSentenceModeReplyForReply:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$patch("https://q-box.microcms.io/api/v1/q_box_replies/"+e.getContentId,{replyAnswer:e.sentence},{headers:{"Content-Type":"application/json","X-MICROCMS-API-KEY":e.MICROCMS_KEY}}).then((function(){e.$emit("set-replies"),e.sentence=""})).catch((function(e){alert("通信に失敗しました。："+e),console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},setReplyTweetId:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$axios.$patch("https://q-box.microcms.io/api/v1/q_box_posts/"+t.getContentOriginId,{replyTweetId:e},{headers:{"Content-Type":"application/json","X-MICROCMS-API-KEY":t.MICROCMS_KEY}}).catch((function(e){alert("通信に失敗しました。："+e),console.log(e)}));case 2:case"end":return n.stop()}}),n)})))()}}}),d=(n(268),n(52)),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.getShow,expression:"getShow"}],staticClass:"sentence-box",class:{held:this.held,boxHeightInPosts:"reply"===e.getMode}},[n("h3",{directives:[{name:"show",rawName:"v-show",value:"question"===e.getMode,expression:"getMode === 'question'"}]},[e._v("お手伝いサークルに質問する")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.sentence,expression:"sentence"}],attrs:{placeholder:this.textareaWord[e.mode],autocomplete:"off"},domProps:{value:e.sentence},on:{input:function(t){t.target.composing||(e.sentence=t.target.value)}}}),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:"answer"===e.getMode||"replyForReply"===e.getMode,expression:"getMode === 'answer' || getMode === 'replyForReply'"}]},[e._v(e._s(this.sentence.length))]),e._v(" "),n("button",{staticClass:"button",on:{click:e.sendSentence}},[e._v(e._s(this.buttonWord[e.mode]))])])])}),[],!1,null,"a19e4cca",null);t.default=component.exports},268:function(e,t,n){"use strict";n(263)},269:function(e,t,n){var o=n(105)(!1);o.push([e.i,".sentence-box[data-v-a19e4cca]{width:calc(100% - 40px);height:150px;display:flex;flex-direction:column;align-items:center;transition:.5s;padding-top:20px;overflow:hidden}.sentence-box h3[data-v-a19e4cca]{margin:10px auto}.sentence-box textarea[data-v-a19e4cca]{resize:none;width:calc(80% - 40px);height:30px;padding:20px;outline:none;border-color:rgba(0,0,0,.15);border-width:2px;border-radius:10px}.sentence-box button[data-v-a19e4cca]{width:80px;height:30px;margin-top:10px;border:1px solid rgba(0,0,0,.3);border-radius:5px;background:none;transition:.5s;cursor:pointer}.sentence-box button[data-v-a19e4cca]:hover{background-color:#77d;border:1px solid #0000c8;color:#fff}.held .button[data-v-a19e4cca]{color:#fff;border:1px solid #fff}.boxHeightInPosts[data-v-a19e4cca]{height:114px}.v-enter[data-v-a19e4cca]{opacity:0;height:0;padding-top:0}.v-enter-to[data-v-a19e4cca]{opacity:1;height:150px;padding-top:20px}.v-enter-active[data-v-a19e4cca]{transition:.5s}.v-leave[data-v-a19e4cca]{opacity:1;padding-top:20px}.v-leave-to[data-v-a19e4cca]{opacity:0;height:0;padding-top:0}.v-leave-active[data-v-a19e4cca]{transition:.5s}@media (max-width:520px){.sentence-box[data-v-a19e4cca]{width:100%;padding-top:10px}.sentence-box h3[data-v-a19e4cca]{font-size:1em}.sentence-box textarea[data-v-a19e4cca]{width:calc(90% - 40px);padding:10px}.boxHeightInPosts[data-v-a19e4cca]{height:94px}.v-enter[data-v-a19e4cca]{opacity:0;height:0;padding-top:0}.v-enter-to[data-v-a19e4cca]{opacity:1;padding-top:10px;height:150px}.v-enter-active[data-v-a19e4cca]{transition:.5s}.v-leave[data-v-a19e4cca]{opacity:1;padding-top:10px;height:150px}.v-leave-to[data-v-a19e4cca]{opacity:0;height:0;padding-top:0}.v-leave-active[data-v-a19e4cca]{transition:opacity .1s,padding-top .5s,height .5s}}",""]),e.exports=o},284:function(e,t){},285:function(e,t){},287:function(e,t){},288:function(e,t){},290:function(e,t){},291:function(e,t){},292:function(e,t){},293:function(e,t){},294:function(e,t){},296:function(e,t){},337:function(e,t,n){e.exports=n.p+"fonts/azuki.8e71322.ttf"},340:function(e,t,n){"use strict";n.r(t);n(41),n(13),n(35),n(42),n(23),n(29),n(43),n(44);var o=n(8),r=(n(51),n(73),n(30),n(31),n(107)),c=n(266),d=n(280),l=n.n(d);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){d=!0,r=e},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw r}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var f={components:{SendSentence:c.default,InfiniteLoading:l.a},data:function(){return{MICROCMS_KEY:"",qWord:"",posts:[],modeQuestion:"question",modeReply:"reply",canvas:null,ctx:null,image:null,postCount:5,state:null,title:""}},methods:{transition:function(e){this.$router.push({path:e})},loadNewPost:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.state=e,10,n.next=4,t.$axios.$get("https://q-box.microcms.io/api/v1/q_box_posts?filters=answer[exists][and]question[contains]"+t.qWord+"&limit=10&offset="+t.postCount,{headers:{"X-MICROCMS-API-KEY":t.MICROCMS_KEY}}).then((function(n){t.postCount<n.totalCount?(r.a.modifyUrlInPost(n.contents,"answer"),t.posts=t.posts.concat(n.contents),r.a.generateImage(document,n.contents,"question","1"),t.setReply(),t.postCount+=n.contents.length,e.loaded()):t.postCount>=n.totalCount&&(t.postCount=1,e.complete())})).catch((function(t){e.error(),alert("通信に失敗しました。："+t),console.log(t)}));case 4:case"end":return n.stop()}}),n)})))()},getPost:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.qWord=e,t.state&&t.state.reset(),t.setTitle(e),n.next=5,t.$axios.$get("https://q-box.microcms.io/api/v1/q_box_posts?filters=answer[exists][and]question[contains]"+e+"&limit=5",{headers:{"X-MICROCMS-API-KEY":t.MICROCMS_KEY}}).then((function(e){t.posts=e.contents,r.a.generateImage(document,e.contents,"question","1"),t.setReply(),r.a.modifyUrlInPost(t.posts,"answer")}));case 5:case"end":return n.stop()}}),n)})))()},setTitle:function(e){this.title=e},setReply:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.posts){t.next=17;break}n=h(e.posts),t.prev=2,c=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.value,t.next=3,e.$axios.$get("https://q-box.microcms.io/api/v1/q_box_replies?filters=replyFor[equals]"+n.id+"[and]replyAnswer[exists]&orders=createdAt",{headers:{"X-MICROCMS-API-KEY":e.MICROCMS_KEY}}).then((function(t){r.a.generateImage(document,t.contents,"replySentence","1"),e.$set(n,"replies",t.contents),r.a.modifyUrlInPost(n.replies,"replyAnswer")})).catch((function(e){console.log(e)}));case 3:case"end":return t.stop()}}),t)})),n.s();case 5:if((o=n.n()).done){t.next=9;break}return t.delegateYield(c(),"t0",7);case 7:t.next=5;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(2),n.e(t.t1);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})))()}},mounted:function(){this.MICROCMS_KEY="f999ee3a5b064d859ee8072912dd0265ab9f"}},m=(n(486),n(52)),component=Object(m.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app"},[n("SendSentence",{attrs:{mode:e.modeQuestion,id:"send-sentence",show:!0}}),e._v(" "),n("ul",[n("h2",[e._v("「 "+e._s(this.title)+" 」の検索結果")]),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:!e.posts,expression:"!posts"}]},[e._v("合致する質問は見つかりませんでした。")]),e._v(" "),e._l(e.posts,(function(t){return n("li",{key:t.id},[n("div",{staticClass:"primary-post"},[n("p",{staticClass:"created-at"},[e._v(e._s(t.createdAt.substr(0,10)))]),e._v(" "),n("div",{staticClass:"card-button",on:{click:function(n){return e.transition(t.id)}}},[n("canvas",{attrs:{id:t.id+"1"}})]),e._v(" "),n("p",{domProps:{innerHTML:e._s(t.answer)}})]),e._v(" "),e._l(t.replies,(function(t){return n("div",{key:t.id,staticClass:"secondary-post"},[n("canvas",{attrs:{id:t.id+"1"}}),e._v(" "),n("p",{domProps:{innerHTML:e._s(t.replyAnswer)}},[e._v(e._s(t.replyAnswer))])])})),e._v(" "),n("SendSentence",{attrs:{mode:e.modeReply,contentId:t.id,show:!0}})],2)}))],2),e._v(" "),n("infinite-loading",{on:{infinite:e.loadNewPost}},[n("div",{staticClass:"spinner",attrs:{slot:"spinner"},slot:"spinner"},[e._v("読み込んでいます...")]),e._v(" "),n("div",{staticClass:"no-more",attrs:{slot:"no-more"},slot:"no-more"},[e._v("条件に合致した質問は以上です。")]),e._v(" "),n("div",{staticClass:"no-results",attrs:{slot:"no-results"},slot:"no-results"},[e._v("条件に合致した質問は見つかりませんでした。")]),e._v(" "),n("div",{staticClass:"no-results",attrs:{slot:"error"},slot:"error"},[e._v("エラーが発生しました。")])])],1)}),[],!1,null,"5a13a97d",null);t.default=component.exports},395:function(e,t,n){var content=n(487);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(106).default)("70f4ca3b",content,!0,{sourceMap:!1})},486:function(e,t,n){"use strict";n(395)},487:function(e,t,n){var o=n(105),r=n(300),c=n(337),d=o(!1),l=r(c);d.push([e.i,'@font-face{font-family:"azuki";src:url('+l+') format("truetype")}*[data-v-5a13a97d]{font-family:azuki}* #send-sentence[data-v-5a13a97d]{width:100%;margin-top:90px}* ul[data-v-5a13a97d]{width:80%;margin:0 auto}* ul li[data-v-5a13a97d]{display:flex;flex-direction:column;align-items:center;margin:30px 0;padding:5% 10%;box-shadow:0 0 5px 5px rgba(0,0,0,.1);word-wrap:break-word}* ul li .primary-post[data-v-5a13a97d]{width:80%;text-align:center;margin:5px auto}* ul li .primary-post .created-at[data-v-5a13a97d]{width:100px;padding:5px 10px;margin:10px;border:2px solid rgba(67,134,135,.7);background-color:#75b8b9;color:#fff;border-radius:5px}* ul li .primary-post .card-button[data-v-5a13a97d]{transition:.5s;cursor:pointer}* ul li .primary-post .card-button[data-v-5a13a97d]:hover{opacity:.7}* ul li canvas[data-v-5a13a97d]{width:100%;border-radius:10px}* ul li canvas div[data-v-5a13a97d]{width:90%;text-align:center;margin:5px auto}* ul li p[data-v-5a13a97d]{margin:20px 0}* ul li .secondary-post[data-v-5a13a97d]{width:60%;text-align:center}* .spinner[data-v-5a13a97d]{-webkit-animation:spinner-data-v-5a13a97d 1s ease infinite;animation:spinner-data-v-5a13a97d 1s ease infinite}@-webkit-keyframes spinner-data-v-5a13a97d{0%{opacity:1}50%{opacity:0}to{opacity:1}}@keyframes spinner-data-v-5a13a97d{0%{opacity:1}50%{opacity:0}to{opacity:1}}* .no-more[data-v-5a13a97d],* .no-results[data-v-5a13a97d],* .spinner[data-v-5a13a97d]{margin:30px auto}@media (max-width:520px){.send-sentence[data-v-5a13a97d],ul[data-v-5a13a97d]{width:100%}ul h2[data-v-5a13a97d]{font-size:1.6em;margin:20px 10px 10px}ul li[data-v-5a13a97d]{width:100%;padding:20px 0}ul li .primary-post[data-v-5a13a97d]{width:90%}ul li .secondary-post[data-v-5a13a97d]{width:75%}}',""]),e.exports=d}}]);